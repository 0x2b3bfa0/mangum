AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31

Description: >
    {{ context.project_name }}

    {{ context.description }}

Globals:
    Function:
        Timeout: {{ context.timeout }}

Resources:
    {{ context.resource_name }}Function:

        Type: AWS::Serverless::Function
        Properties:
            FunctionName: {{ context.resource_name }}Function
            CodeUri: .
            Handler: app.lambda_handler
            Runtime: python{{ context.runtime_version }}
            # Environment:
            #     Variables:
            #         PARAM1: VALUE
            Events:
                {{ context.resource_name }}:
                    Type: Api
                    Properties:
                        Path: {{ context.url_root }}
                        Method: get

Outputs:
    {{ context.resource_name }}Api:
      Description: "API Gateway endpoint URL for {{ context.resource_name }} function"
      {% raw %}
      Value: !Sub "https://${{ServerlessRestApi}}.execute-api.${{AWS::Region}}.amazonaws.com{% endraw %}{{ context.url_root }}"

    {{ context.resource_name }}Function:
      Description: "{{ context.resource_name }} Lambda Function ARN"
      Value: !GetAtt {{ context.resource_name }}Function.Arn

    {{ context.resource_name }}FunctionIamRole:
      Description: "Implicit IAM Role created for {{ context.resource_name }} function"
      Value: !GetAtt {{ context.resource_name }}FunctionRole.Arn